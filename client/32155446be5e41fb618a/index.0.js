(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(2),c="https://github.com/GrzegorzKazana/toy-interpreter",s=n(1),l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function a(){if(!l)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(o)}for(var u=[],b=0;b<256;++b)u[b]=(b+256).toString(16).substr(1);var j=function(e,t){var n=t||0,r=u;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};var d=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var c=0;c<16;++c)t[r+c]=i[c];return t||j(i)},f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},O=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var c=arguments[t],s=0,l=c.length;s<l;s++,i++)r[i]=c[s];return r},p={lines:[]};function m(e){let t,n;return{c(){t=Object(r.t)("span"),n=Object(r.T)(e[1]),this.h()},l(i){t=Object(r.l)(i,"SPAN",{class:!0});var c=Object(r.j)(t);n=Object(r.n)(c,e[1]),c.forEach(r.s),this.h()},h(){Object(r.f)(t,"class","entry__prefix svelte-1et4io4")},m(e,i){Object(r.C)(e,t,i),Object(r.d)(t,n)},p(e,t){2&t&&Object(r.Q)(n,e[1])},d(e){e&&Object(r.s)(t)}}}function h(e){let t,n,i,c,s=e[1]&&m(e);return{c(){t=Object(r.t)("p"),s&&s.c(),n=Object(r.R)(),i=Object(r.t)("span"),c=Object(r.T)(e[0]),this.h()},l(l){t=Object(r.l)(l,"P",{class:!0});var o=Object(r.j)(t);s&&s.l(o),n=Object(r.m)(o),i=Object(r.l)(o,"SPAN",{class:!0,"data-testid":!0});var a=Object(r.j)(i);c=Object(r.n)(a,e[0]),a.forEach(r.s),o.forEach(r.s),this.h()},h(){Object(r.f)(i,"class","entry__text"),Object(r.f)(i,"data-testid","entry-text"),Object(r.f)(t,"class","entry svelte-1et4io4")},m(e,l){Object(r.C)(e,t,l),s&&s.m(t,null),Object(r.d)(t,n),Object(r.d)(t,i),Object(r.d)(i,c)},p(e,[i]){e[1]?s?s.p(e,i):(s=m(e),s.c(),s.m(t,n)):s&&(s.d(1),s=null),1&i&&Object(r.Q)(c,e[0])},i:r.G,o:r.G,d(e){e&&Object(r.s)(t),s&&s.d()}}}function v(e,t,n){let{text:r=""}=t,{prefix:i=""}=t;return e.$set=e=>{"text"in e&&n(0,r=e.text),"prefix"in e&&n(1,i=e.prefix)},[r,i]}class g extends r.a{constructor(e){var t;super(),document.getElementById("svelte-1et4io4-style")||((t=Object(r.t)("style")).id="svelte-1et4io4-style",t.textContent=".entry.svelte-1et4io4{display:flex;flex-direction:row;align-items:stretch;justify-content:flex-start;margin:0 0 4px 0;white-space:pre-wrap}.entry__prefix.svelte-1et4io4{min-width:1em}",Object(r.d)(document.head,t)),Object(r.B)(this,e,v,h,r.O,{text:0,prefix:1})}}var y=g,x=function(){return(x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var c=arguments[t],s=0,l=c.length;s<l;s++,i++)r[i]=c[s];return r},w={history:[],relevantHistory:[],viewedHistoryIndex:-1,stashedInput:"",value:""};function I(e){let t,n,i,c,s,l,o,a,u,b;return{c(){t=Object(r.t)("p"),n=Object(r.t)("span"),i=Object(r.T)(">"),c=Object(r.R)(),s=Object(r.t)("input"),o=Object(r.R)(),a=Object(r.t)("label"),u=Object(r.T)("Commandline input"),this.h()},l(e){t=Object(r.l)(e,"P",{class:!0});var l=Object(r.j)(t);n=Object(r.l)(l,"SPAN",{class:!0});var b=Object(r.j)(n);i=Object(r.n)(b,">"),b.forEach(r.s),c=Object(r.m)(l),s=Object(r.l)(l,"INPUT",{id:!0,class:!0,"data-testid":!0,type:!0,spellcheck:!0,value:!0}),o=Object(r.m)(l),a=Object(r.l)(l,"LABEL",{for:!0,class:!0});var j=Object(r.j)(a);u=Object(r.n)(j,"Commandline input"),j.forEach(r.s),l.forEach(r.s),this.h()},h(){Object(r.f)(n,"class","command__prefix svelte-je6pl"),Object(r.f)(s,"id","cmd-input"),Object(r.f)(s,"class","command__input svelte-je6pl"),Object(r.f)(s,"data-testid","command-input"),Object(r.f)(s,"type","text"),Object(r.f)(s,"spellcheck","false"),s.value=l=e[1].value,Object(r.f)(a,"for","cmd-input"),Object(r.f)(a,"class","command__label svelte-je6pl"),Object(r.f)(t,"class","command svelte-je6pl")},m(l,j,d){Object(r.C)(l,t,j),Object(r.d)(t,n),Object(r.d)(n,i),Object(r.d)(t,c),Object(r.d)(t,s),e[5](s),Object(r.d)(t,o),Object(r.d)(t,a),Object(r.d)(a,u),d&&Object(r.N)(b),b=[Object(r.E)(s,"keydown",e[3]),Object(r.E)(s,"input",e[6])]},p(e,[t]){2&t&&l!==(l=e[1].value)&&s.value!==l&&(s.value=l)},i:r.G,o:r.G,d(n){n&&Object(r.s)(t),e[5](null),Object(r.N)(b)}}}function C(e,t,n){let c,{inputRef:l}=t,{onSubmit:o}=t;const a=function(e){var t=e.load("COMMAND_HISTORY_KEY"),n=Object(s.a)(t?x(x({},w),{history:t,relevantHistory:t}):w),r=n.subscribe,i=n.update;return{subscribe:r,prev:function(){return i((function(e){var t=Math.min(e.viewedHistoryIndex+1,e.relevantHistory.length-1);return x(x({},e),{stashedInput:-1===e.viewedHistoryIndex?e.value:e.stashedInput,viewedHistoryIndex:t,value:-1===t?e.value:e.relevantHistory[t]})}))},next:function(){return i((function(e){var t=Math.max(e.viewedHistoryIndex-1,-1);return x(x({},e),{viewedHistoryIndex:t,value:-1===t?e.stashedInput:e.relevantHistory[t]})}))},addEntry:function(t){return i((function(n){var r=t&&t!==n.history[0]?$([t],n.history):n.history;return e.save("COMMAND_HISTORY_KEY",r),x(x({},n),{history:r,relevantHistory:r,value:"",stashedInput:"",viewedHistoryIndex:-1})}))},setValue:function(e){return i((function(t){return x(x({},t),{relevantHistory:t.history.filter((function(t){return t.startsWith(e)})),viewedHistoryIndex:-1,value:e})}))}}}((u=sessionStorage,{save:function(e,t){return u.setItem(e,JSON.stringify(t))},load:function(e){try{var t=u.getItem(e);return t?JSON.parse(t):null}catch(e){return null}}}));var u;Object(r.o)(e,a,e=>n(1,c=e));Object(i.c)(()=>{Object(i.e)().then(()=>l.focus())});return e.$set=e=>{"inputRef"in e&&n(0,l=e.inputRef),"onSubmit"in e&&n(4,o=e.onSubmit)},[l,c,a,e=>{switch(e.keyCode){case 13:{const e=c.value;return o(e),void a.addEntry(e)}case 38:return a.prev(),void e.preventDefault();case 40:return void a.next();default:return!1}},o,function(e){r.h[e?"unshift":"push"](()=>{n(0,l=e)})},e=>a.setValue(e.target.value)]}class E extends r.a{constructor(e){var t;super(),document.getElementById("svelte-je6pl-style")||((t=Object(r.t)("style")).id="svelte-je6pl-style",t.textContent=".command.svelte-je6pl{display:flex;flex-direction:row;align-items:stretch;justify-content:flex-start;margin:0 0 4px 0}.command__input.svelte-je6pl{flex-grow:1;background-color:transparent;margin:0;outline:0px;border:0;padding:0;font-size:1rem;font-family:'Courier New', Courier, monospace;color:#fff}.command__prefix.svelte-je6pl{min-width:1em}.command__label.svelte-je6pl{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}",Object(r.d)(document.head,t)),Object(r.B)(this,e,C,I,r.O,{inputRef:0,onSubmit:4})}}var R=E;function _(e,t,n){const i=e.slice();return i[9]=t[n].id,i[10]=Object(r.I)(t[n],["id"]),i}function k(e,t){let n,i;const c=[t[10]];let s={};for(let e=0;e<c.length;e+=1)s=Object(r.e)(s,c[e]);const l=new y({props:s});return{key:e,first:null,c(){n=Object(r.u)(),Object(r.p)(l.$$.fragment),this.h()},l(e){n=Object(r.u)(),Object(r.k)(l.$$.fragment,e),this.h()},h(){this.first=n},m(e,t){Object(r.C)(e,n,t),Object(r.F)(l,e,t),i=!0},p(e,t){const n=2&t?Object(r.z)(c,[Object(r.y)(e[10])]):{};l.$set(n)},i(e){i||(Object(r.V)(l.$$.fragment,e),i=!0)},o(e){Object(r.W)(l.$$.fragment,e),i=!1},d(e){e&&Object(r.s)(n),Object(r.r)(l,e)}}}function z(e){let t,n;function i(t){e[7].call(null,t)}let c={onSubmit:e[0]};void 0!==e[3]&&(c.inputRef=e[3]);const s=new R({props:c});return r.h.push(()=>Object(r.g)(s,"inputRef",i)),{c(){Object(r.p)(s.$$.fragment)},l(e){Object(r.k)(s.$$.fragment,e)},m(e,t){Object(r.F)(s,e,t),n=!0},p(e,n){const i={};1&n&&(i.onSubmit=e[0]),!t&&8&n&&(t=!0,i.inputRef=e[3],Object(r.c)(()=>t=!1)),s.$set(i)},i(e){n||(Object(r.V)(s.$$.fragment,e),n=!0)},o(e){Object(r.W)(s.$$.fragment,e),n=!1},d(e){Object(r.r)(s,e)}}}function A(e){let t,n,i,s,l,o,a,u,b,j,d=[],f=new Map;const O=new y({props:{text:"Welcome to toy-interpreter!\nA simple interpreter written in Rust running in Your browser using WebAssembly.\n"}}),p=new y({props:{text:"\nType 'syntax' or 'examples' for help.\n"}});let m=e[1];const h=e=>e[9];for(let t=0;t<m.length;t+=1){let n=_(e,m,t),r=h(n);f.set(r,d[t]=k(r,n))}let v=e[2]&&z(e);return{c(){t=Object(r.t)("article"),Object(r.p)(O.$$.fragment),n=Object(r.R)(),i=Object(r.t)("a"),s=Object(r.T)(c),l=Object(r.R)(),Object(r.p)(p.$$.fragment),o=Object(r.R)();for(let e=0;e<d.length;e+=1)d[e].c();a=Object(r.R)(),v&&v.c(),this.h()},l(e){t=Object(r.l)(e,"ARTICLE",{class:!0});var u=Object(r.j)(t);Object(r.k)(O.$$.fragment,u),n=Object(r.m)(u),i=Object(r.l)(u,"A",{class:!0,href:!0});var b=Object(r.j)(i);s=Object(r.n)(b,c),b.forEach(r.s),l=Object(r.m)(u),Object(r.k)(p.$$.fragment,u),o=Object(r.m)(u);for(let e=0;e<d.length;e+=1)d[e].l(u);a=Object(r.m)(u),v&&v.l(u),u.forEach(r.s),this.h()},h(){Object(r.f)(i,"class","link svelte-1niq9jl"),Object(r.f)(i,"href",c),Object(r.f)(t,"class","command-line svelte-1niq9jl")},m(c,f,m){Object(r.C)(c,t,f),Object(r.F)(O,t,null),Object(r.d)(t,n),Object(r.d)(t,i),Object(r.d)(i,s),Object(r.d)(t,l),Object(r.F)(p,t,null),Object(r.d)(t,o);for(let e=0;e<d.length;e+=1)d[e].m(t,null);Object(r.d)(t,a),v&&v.m(t,null),e[8](t),b=!0,m&&Object(r.N)(j),j=[Object(r.E)(t,"click",e[5]),Object(r.b)(u=e[6].call(null,t,e[1]))]},p(e,[n]){if(2&n){const i=e[1];Object(r.A)(),d=Object(r.X)(d,n,h,1,e,i,f,t,r.L,k,a,_),Object(r.i)()}e[2]?v?(v.p(e,n),Object(r.V)(v,1)):(v=z(e),v.c(),Object(r.V)(v,1),v.m(t,null)):v&&(Object(r.A)(),Object(r.W)(v,1,1,()=>{v=null}),Object(r.i)()),u&&Object(r.D)(u.update)&&2&n&&u.update.call(null,e[1])},i(e){if(!b){Object(r.V)(O.$$.fragment,e),Object(r.V)(p.$$.fragment,e);for(let e=0;e<m.length;e+=1)Object(r.V)(d[e]);Object(r.V)(v),b=!0}},o(e){Object(r.W)(O.$$.fragment,e),Object(r.W)(p.$$.fragment,e);for(let e=0;e<d.length;e+=1)Object(r.W)(d[e]);Object(r.W)(v),b=!1},d(n){n&&Object(r.s)(t),Object(r.r)(O),Object(r.r)(p);for(let e=0;e<d.length;e+=1)d[e].d();v&&v.d(),e[8](null),Object(r.N)(j)}}}function H(e,t,n){let i,c,{interpret:s}=t,{lines:l}=t,{isInitialized:o}=t;return e.$set=e=>{"interpret"in e&&n(0,s=e.interpret),"lines"in e&&n(1,l=e.lines),"isInitialized"in e&&n(2,o=e.isInitialized)},[s,l,o,i,c,e=>e.target===c&&i.focus(),e=>({update:()=>c.scrollTo(0,e.scrollHeight)}),function(e){i=e,n(3,i)},function(e){r.h[e?"unshift":"push"](()=>{n(4,c=e)})}]}class V extends r.a{constructor(e){var t;super(),document.getElementById("svelte-1niq9jl-style")||((t=Object(r.t)("style")).id="svelte-1niq9jl-style",t.textContent=".command-line.svelte-1niq9jl{height:100%;overflow-y:scroll;background-color:#000;padding:1.5rem}.link.svelte-1niq9jl{color:#fff;overflow-wrap:break-word;word-wrap:break-word}.command-line{font-size:1rem;font-family:'Courier New', Courier, monospace;color:#fff}",Object(r.d)(document.head,t)),Object(r.B)(this,e,H,A,r.O,{interpret:0,lines:1,isInitialized:2})}}var S=V;const N=e=>({lines:2&e,isInitialized:1&e}),M=e=>({interpret:e[3],lines:e[1].lines,isInitialized:!!e[0]});function W(e){let t;const n=e[5].default,i=Object(r.q)(n,e,e[4],M);return{c(){i&&i.c()},l(e){i&&i.l(e)},m(e,n){i&&i.m(e,n),t=!0},p(e,[t]){i&&i.p&&19&t&&i.p(Object(r.x)(n,e,e[4],M),Object(r.w)(n,e[4],t,N))},i(e){t||(Object(r.V)(i,e),t=!0)},o(e){Object(r.W)(i,e),t=!1},d(e){i&&i.d(e)}}}function q(e,t,c){let l,o=null;const a=(u=Object(s.a)(p),b=u.subscribe,j=u.update,{subscribe:b,addInputLine:function(e){return j((function(t){return f(f({},t),{lines:O(t.lines,[{id:d(),text:e,prefix:">"}])})}))},addOutputLine:m=function(e){return j((function(t){return f(f({},t),{lines:O(t.lines,[{id:d(),text:e}])})}))},showInitializationMessage:function(){return m("Initializing...")},showInitCompleteMessage:function(){return m("Done!")},showInitErrorMessage:function(e){return m("Error occured: "+e)}});var u,b,j,m;Object(r.o)(e,a,e=>c(1,l=e)),a.showInitializationMessage();Object(i.c)(()=>{n.e(2).then(n.bind(null,5)).then(({InterpreterJs:e})=>{c(0,o=e.new()),a.showInitCompleteMessage()}).catch(e=>a.showInitErrorMessage(e.message))}),Object(i.b)(()=>{o&&o.free()});let{$$slots:h={},$$scope:v}=t;return e.$set=e=>{"$$scope"in e&&c(4,v=e.$$scope)},[o,l,a,e=>{switch(a.addInputLine(e),e){case"syntax":return void a.addOutputLine("\n    <command> ::= <statement> | <expression>;\n\n    <statement> ::= <assignment> | <function-declaration>;\n\n    <assignment> ::= <identifier> = <expression>;\n    <function-declaration> ::= fun <identifier>([<declaration-argument-list>]) = <expression>;\n    <declaration-argument-list> ::= <identifier>[, <identifier>]*;\n\n\n    <expression> ::= \n        <number-literal> | \n        <signed-number-literal> | \n        <identifier> | \n        <function-call> | \n        <terenary-expression> | \n        <expression><operator><expression> | \n        (<expression>);\n\n    <signed-number-literal> ::= +<number-literal> | -<number-literal>;\n    <function-call> ::= <identifier>([<argument-list>]);\n    <argument-list> ::= <expression>[, <expression>]*;\n    <terenary-expression> ::= <expression> ? <expression> : <expression>;\n\n    <identifier> ::= '[a-zA-Z]\\w*';\n    <number-literal> ::= '\\d+';\n    <operator> ::= + | - | * | /;\n\n");case"examples":return void a.addOutputLine("\n    2 + 2\n    9 - 2 * 3\n    (9 - 2) * 3\n\n    a = 2 + 3\n    b = a + 1\n\n    2 ? 3 : 4       // 3\n    0 ? 3 : 4       // 4\n    -2 ? 3 : 4      // 4 - positive values considered truthy\n\n    fun sum(a, b) = a + b\n    fun sub(a, b) = sum(a, -b)\n\n    fun factorial(n) = n ? n * factorial(n - 1) : 1\n    fun fibonacci(n) = n ? (n - 1 ? fibonacci(n - 1) + fibonacci(n - 2) : 1) : 0\n\n");default:if(!o||!e)return;a.addOutputLine(o.interpret(e))}},v,h]}class T extends r.a{constructor(e){super(),Object(r.B)(this,e,q,W,r.O,{})}}var B=T;function L(e){let t;const n=new S({props:{lines:e[0],interpret:e[1],isInitialized:e[2]}});return{c(){Object(r.p)(n.$$.fragment)},l(e){Object(r.k)(n.$$.fragment,e)},m(e,i){Object(r.F)(n,e,i),t=!0},p(e,t){const r={};1&t&&(r.lines=e[0]),2&t&&(r.interpret=e[1]),4&t&&(r.isInitialized=e[2]),n.$set(r)},i(e){t||(Object(r.V)(n.$$.fragment,e),t=!0)},o(e){Object(r.W)(n.$$.fragment,e),t=!1},d(e){Object(r.r)(n,e)}}}function P(e){let t,n;const i=new B({props:{$$slots:{default:[L,({lines:e,interpret:t,isInitialized:n})=>({0:e,1:t,2:n}),({lines:e,interpret:t,isInitialized:n})=>(e?1:0)|(t?2:0)|(n?4:0)]},$$scope:{ctx:e}}});return{c(){t=Object(r.t)("main"),Object(r.p)(i.$$.fragment),this.h()},l(e){t=Object(r.l)(e,"MAIN",{class:!0});var n=Object(r.j)(t);Object(r.k)(i.$$.fragment,n),n.forEach(r.s),this.h()},h(){Object(r.f)(t,"class","page svelte-n9s3qm")},m(e,c){Object(r.C)(e,t,c),Object(r.F)(i,t,null),n=!0},p(e,[t]){const n={};15&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i(e){n||(Object(r.V)(i.$$.fragment,e),n=!0)},o(e){Object(r.W)(i.$$.fragment,e),n=!1},d(e){e&&Object(r.s)(t),Object(r.r)(i)}}}class F extends r.a{constructor(e){var t;super(),document.getElementById("svelte-n9s3qm-style")||((t=Object(r.t)("style")).id="svelte-n9s3qm-style",t.textContent=".page.svelte-n9s3qm{width:100vw;height:100vh}",Object(r.d)(document.head,t)),Object(r.B)(this,e,null,P,r.O,{})}}t.default=F}}]);